# é¡¹ç›®æ¦‚è¿°

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**
- [README.md](file://README.md)
- [package.json](file://package.json)
- [next.config.ts](file://next.config.ts)
- [tsconfig.json](file://tsconfig.json)
- [app/layout.tsx](file://app/layout.tsx)
- [app/page.tsx](file://app/page.tsx)
- [app/globals.css](file://app/globals.css)
- [types/index.ts](file://types/index.ts)
- [lib/db.ts](file://lib/db.ts)
- [lib/seed.ts](file://lib/seed.ts)
- [components/TechCard.tsx](file://components/TechCard.tsx)
- [components/FilterBar.tsx](file://components/FilterBar.tsx)
- [components/StatsPanel.tsx](file://components/StatsPanel.tsx)
- [app/api/layers/route.ts](file://app/api/layers/route.ts)
- [app/api/categories/route.ts](file://app/api/categories/route.ts)
- [app/api/tech-items/route.ts](file://app/api/tech-items/route.ts)
- [app/api/stats/route.ts](file://app/api/stats/route.ts)
</cite>

## ç›®å½•
1. [å¼•è¨€](#å¼•è¨€)
2. [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)
3. [æ ¸å¿ƒç»„ä»¶](#æ ¸å¿ƒç»„ä»¶)
4. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
5. [è¯¦ç»†ç»„ä»¶åˆ†æ](#è¯¦ç»†ç»„ä»¶åˆ†æ)
6. [ä¾èµ–åˆ†æ](#ä¾èµ–åˆ†æ)
7. [æ€§èƒ½è€ƒè™‘](#æ€§èƒ½è€ƒè™‘)
8. [æ•…éšœæ’é™¤æŒ‡å—](#æ•…éšœæ’é™¤æŒ‡å—)
9. [ç»“è®º](#ç»“è®º)
10. [é™„å½•](#é™„å½•)

## å¼•è¨€

Lantu Next æ˜¯ä¸€ä¸ªåŸºäº Next.js æ„å»ºçš„æŠ€æœ¯æ ˆç®¡ç†ç³»ç»Ÿï¼Œä¸“é—¨ç”¨äºå±•ç¤ºå’Œç®¡ç†äº‘å¹³å°æŠ€æœ¯è“å›¾å›¾è°±ã€‚è¯¥é¡¹ç›®é‡‡ç”¨ç°ä»£åŒ–çš„å…¨æ ˆæŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬ Next.js 16ã€TypeScriptã€Tailwind CSS å’Œ SQLiteï¼Œä¸ºä¼ä¸šçº§æŠ€æœ¯è§„åˆ’æä¾›äº†ç›´è§‚çš„å¯è§†åŒ–ç•Œé¢ã€‚

### é¡¹ç›®æ ¸å¿ƒç›®æ ‡

è¯¥é¡¹ç›®æ—¨åœ¨è§£å†³æŠ€æœ¯æ ˆç®¡ç†ä¸­çš„å…³é”®ç—›ç‚¹ï¼š
- **ç»Ÿä¸€æŠ€æœ¯è§†å›¾**ï¼šå°†åˆ†æ•£çš„æŠ€æœ¯æ ˆä¿¡æ¯æ•´åˆåˆ°ä¸€ä¸ªå¯è§†åŒ–çš„è“å›¾ä¸­
- **å®æ—¶çŠ¶æ€è·Ÿè¸ª**ï¼šæä¾›æŠ€æœ¯é¡¹çš„å®æ—¶çŠ¶æ€æ˜¾ç¤ºå’Œè¦†ç›–ç‡ç»Ÿè®¡
- **çµæ´»çš„ç®¡ç†èƒ½åŠ›**ï¼šæ”¯æŒæŠ€æœ¯é¡¹çš„å¢åˆ æ”¹æŸ¥å’Œå±‚çº§ç®¡ç†
- **å¤šç»´åº¦ç­›é€‰**ï¼šæ”¯æŒæŒ‰çŠ¶æ€ã€æ ‡ç­¾ç­‰å¤šç»´åº¦æŠ€æœ¯ç­›é€‰

### ä¸»è¦åŠŸèƒ½ç‰¹æ€§

- âœ… **æŠ€æœ¯è“å›¾å±•ç¤º**ï¼šä»¥å±‚çº§åŒ–çš„æ–¹å¼å±•ç¤ºå®Œæ•´çš„äº‘å¹³å°æŠ€æœ¯æ ˆ
- âœ… **å®æ—¶çŠ¶æ€ç®¡ç†**ï¼šæ”¯æŒæŠ€æœ¯é¡¹çŠ¶æ€çš„å®æ—¶æ›´æ–°å’Œæ˜¾ç¤º
- âœ… **å¤šç»´åº¦ç­›é€‰**ï¼šæ”¯æŒæŒ‰çŠ¶æ€ã€æŠ€æœ¯ç±»åˆ«ã€ä¼˜å…ˆçº§ç­‰å¤šç»´åº¦ç­›é€‰
- âœ… **ç»Ÿè®¡é¢æ¿**ï¼šæä¾›æŠ€æœ¯æ ˆè¦†ç›–ç‡å’ŒçŠ¶æ€ç»Ÿè®¡
- âœ… **å“åº”å¼è®¾è®¡**ï¼šé€‚é…ä¸åŒå±å¹•å°ºå¯¸çš„è®¾å¤‡è®¿é—®

### æŠ€æœ¯é€‰å‹ç†ç”±

é€‰æ‹©è¿™äº›æŠ€æœ¯æ ˆçš„åŸå› ï¼š
- **Next.js 16**ï¼šæä¾›æœ€ä½³çš„å¼€å‘ä½“éªŒå’Œç”Ÿäº§æ€§èƒ½
- **TypeScript**ï¼šå¢å¼ºä»£ç ç±»å‹å®‰å…¨æ€§å’Œå¼€å‘æ•ˆç‡
- **Tailwind CSS**ï¼šå¿«é€Ÿæ„å»ºä¸€è‡´çš„ç”¨æˆ·ç•Œé¢
- **SQLite**ï¼šè½»é‡çº§ã€æ˜“éƒ¨ç½²çš„æœ¬åœ°æ•°æ®åº“è§£å†³æ–¹æ¡ˆ

## é¡¹ç›®ç»“æ„

Lantu Next é‡‡ç”¨æ ‡å‡†çš„ Next.js 13+ App Router ç»“æ„ï¼Œå…·æœ‰æ¸…æ™°çš„æ¨¡å—åŒ–ç»„ç»‡ï¼š

```mermaid
graph TB
subgraph "åº”ç”¨å±‚"
A[app/] --> B[api/]
A --> C[admin/]
A --> D[page.tsx]
A --> E[layout.tsx]
end
subgraph "ç»„ä»¶å±‚"
F[components/] --> G[TechCard.tsx]
F --> H[FilterBar.tsx]
F --> I[StatsPanel.tsx]
end
subgraph "å·¥å…·å±‚"
J[lib/] --> K[db.ts]
J --> L[seed.ts]
end
subgraph "é…ç½®å±‚"
M[next.config.ts]
N[tsconfig.json]
O[package.json]
end
subgraph "æ•°æ®å±‚"
P[data/techmap.db]
end
A --> F
A --> J
J --> P
```

**å›¾è¡¨æ¥æº**
- [app/layout.tsx](file://app/layout.tsx#L1-L36)
- [lib/db.ts](file://lib/db.ts#L1-L312)
- [components/TechCard.tsx](file://components/TechCard.tsx#L1-L37)

### æ ¸å¿ƒç›®å½•è¯´æ˜

- **app/**ï¼šNext.js åº”ç”¨çš„ä¸»è¦å…¥å£ç‚¹ï¼ŒåŒ…å«é¡µé¢å’Œ API è·¯ç”±
- **components/**ï¼šå¯å¤ç”¨çš„ React ç»„ä»¶åº“
- **lib/**ï¼šåº”ç”¨ç¨‹åºçš„æ ¸å¿ƒé€»è¾‘å’Œæ•°æ®åº“æ“ä½œ
- **types/**ï¼šTypeScript ç±»å‹å®šä¹‰
- **data/**ï¼šSQLite æ•°æ®åº“æ–‡ä»¶å­˜å‚¨

**ç« èŠ‚æ¥æº**
- [README.md](file://README.md#L20-L43)
- [package.json](file://package.json#L1-L43)

## æ ¸å¿ƒç»„ä»¶

### æ•°æ®æ¨¡å‹æ¶æ„

é¡¹ç›®é‡‡ç”¨ä¸‰å±‚åµŒå¥—çš„æ•°æ®æ¨¡å‹æ¥ç»„ç»‡æŠ€æœ¯ä¿¡æ¯ï¼š

```mermaid
erDiagram
LAYERS {
INTEGER id PK
TEXT name
TEXT icon
INTEGER display_order
}
CATEGORIES {
INTEGER id PK
TEXT name
TEXT icon
INTEGER layer_id FK
INTEGER display_order
}
TECH_ITEMS {
INTEGER id PK
TEXT name
INTEGER category_id FK
TEXT status
TEXT priority
INTEGER is_new
TEXT description
TEXT tags
INTEGER display_order
}
LAYERS ||--o{ CATEGORIES : "åŒ…å«"
CATEGORIES ||--o{ TECH_ITEMS : "åŒ…å«"
```

**å›¾è¡¨æ¥æº**
- [lib/db.ts](file://lib/db.ts#L14-L49)
- [types/index.ts](file://types/index.ts#L1-L34)

### å…³é”®ç»„ä»¶å…³ç³»

```mermaid
classDiagram
class HomePage {
+layers : Layer[]
+categories : Category[]
+techItems : TechItem[]
+stats : Stats
+fetchData()
+handleRefresh()
+getFilteredItems()
}
class TechCard {
+item : TechItem
+isActive : boolean
+priorityClass : string
}
class FilterBar {
+filter : string
+onFilterChange()
}
class StatsPanel {
+stats : Stats
}
class LayerManager {
+layers : Layer[]
+onUpdate()
}
HomePage --> TechCard : "æ¸²æŸ“"
HomePage --> FilterBar : "ä½¿ç”¨"
HomePage --> StatsPanel : "æ˜¾ç¤º"
HomePage --> LayerManager : "ç®¡ç†"
```

**å›¾è¡¨æ¥æº**
- [app/page.tsx](file://app/page.tsx#L15-L238)
- [components/TechCard.tsx](file://components/TechCard.tsx#L7-L37)
- [components/FilterBar.tsx](file://components/FilterBar.tsx#L1-L52)
- [components/StatsPanel.tsx](file://components/StatsPanel.tsx#L1-L84)

**ç« èŠ‚æ¥æº**
- [types/index.ts](file://types/index.ts#L1-L34)
- [app/page.tsx](file://app/page.tsx#L15-L238)

## æ¶æ„æ¦‚è§ˆ

### æ•´ä½“ç³»ç»Ÿæ¶æ„

```mermaid
graph TB
subgraph "å®¢æˆ·ç«¯å±‚"
A[Next.js App Router]
B[React Components]
C[Tailwind CSS]
end
subgraph "API å±‚"
D[Next.js API Routes]
E[RESTful Endpoints]
end
subgraph "ä¸šåŠ¡é€»è¾‘å±‚"
F[TypeScript Services]
G[Database Operations]
end
subgraph "æ•°æ®å±‚"
H[SQLite Database]
I[techmap.db]
end
subgraph "é…ç½®å±‚"
J[Next.js Config]
K[TypeScript Config]
L[Package Dependencies]
end
A --> B
B --> D
D --> E
E --> F
F --> G
G --> H
H --> I
J --> A
K --> F
L --> A
```

**å›¾è¡¨æ¥æº**
- [next.config.ts](file://next.config.ts#L1-L10)
- [tsconfig.json](file://tsconfig.json#L1-L35)
- [package.json](file://package.json#L1-L43)

### æ•°æ®æµæ¶æ„

```mermaid
sequenceDiagram
participant U as ç”¨æˆ·ç•Œé¢
participant R as Next.js Router
participant API as API è·¯ç”±
participant DB as æ•°æ®åº“å±‚
participant S as ä¸šåŠ¡æœåŠ¡
U->>R : è¯·æ±‚é¡µé¢
R->>API : å¹¶è¡Œè¯·æ±‚æ•°æ®
API->>S : è·å–æ•°æ®
S->>DB : æŸ¥è¯¢æ•°æ®åº“
DB-->>S : è¿”å›æ•°æ®
S-->>API : å¤„ç†åçš„æ•°æ®
API-->>R : JSON å“åº”
R-->>U : æ¸²æŸ“é¡µé¢
Note over U,DB : æ‰¹é‡æ•°æ®è·å–ä¼˜åŒ–
```

**å›¾è¡¨æ¥æº**
- [app/page.tsx](file://app/page.tsx#L39-L68)
- [lib/db.ts](file://lib/db.ts#L52-L114)

## è¯¦ç»†ç»„ä»¶åˆ†æ

### é¦–é¡µç»„ä»¶åˆ†æ

é¦–é¡µæ˜¯æ•´ä¸ªåº”ç”¨çš„æ ¸å¿ƒï¼Œè´Ÿè´£åè°ƒæ‰€æœ‰å­ç»„ä»¶çš„å·¥ä½œï¼š

```mermaid
flowchart TD
Start([é¡µé¢åŠ è½½]) --> InitState["åˆå§‹åŒ–çŠ¶æ€<br/>- layers: []<br/>- categories: []<br/>- techItems: []<br/>- stats: {}"]
InitState --> FetchData["å¹¶è¡Œè·å–æ•°æ®<br/>- å±‚çº§æ•°æ®<br/>- åˆ†ç±»æ•°æ®<br/>- æŠ€æœ¯é¡¹æ•°æ®<br/>- ç»Ÿè®¡æ•°æ®"]
FetchData --> BatchUpdate["æ‰¹é‡çŠ¶æ€æ›´æ–°<br/>- setLayers()<br/>- setCategories()<br/>- setTechItems()<br/>- setStats()"]
BatchUpdate --> RenderUI["æ¸²æŸ“ç”¨æˆ·ç•Œé¢"]
RenderUI --> FilterItems["è¿‡æ»¤æŠ€æœ¯é¡¹<br/>- çŠ¶æ€ç­›é€‰<br/>- æ ‡ç­¾ç­›é€‰<br/>- åˆ†ç±»ç­›é€‰"]
FilterItems --> RenderCards["æ¸²æŸ“æŠ€æœ¯å¡ç‰‡"]
RenderCards --> UserAction{"ç”¨æˆ·æ“ä½œ?"}
UserAction --> |åˆ·æ–°| RefreshData["è§¦å‘æ•°æ®åˆ·æ–°"]
UserAction --> |ç­›é€‰| ApplyFilter["åº”ç”¨ç­›é€‰æ¡ä»¶"]
UserAction --> |ç®¡ç†| OpenManager["æ‰“å¼€ç®¡ç†ç•Œé¢"]
RefreshData --> FetchData
ApplyFilter --> FilterItems
OpenManager --> FetchData
UserAction --> |æ— | End([å®Œæˆ])
```

**å›¾è¡¨æ¥æº**
- [app/page.tsx](file://app/page.tsx#L15-L238)

#### å…³é”®å®ç°ç‰¹æ€§

1. **å¹¶å‘æ•°æ®è·å–**ï¼šä½¿ç”¨ Promise.all å¹¶è¡Œè·å–æ‰€æœ‰æ•°æ®ï¼Œæå‡åŠ è½½æ€§èƒ½
2. **çŠ¶æ€ç®¡ç†ä¼˜åŒ–**ï¼šé€šè¿‡ useMemo é¿å…ä¸å¿…è¦çš„å¯¹è±¡åˆ›å»º
3. **åŠ¨æ€ç»„ä»¶æ¸²æŸ“**ï¼šæ ¹æ®æŠ€æœ¯é¡¹çŠ¶æ€åŠ¨æ€è°ƒæ•´æ ·å¼å’Œè¡Œä¸º
4. **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒä¸åŒå±å¹•å°ºå¯¸çš„è‡ªé€‚åº”å¸ƒå±€

**ç« èŠ‚æ¥æº**
- [app/page.tsx](file://app/page.tsx#L15-L238)

### æŠ€æœ¯å¡ç‰‡ç»„ä»¶

æŠ€æœ¯å¡ç‰‡æ˜¯å±•ç¤ºå•ä¸ªæŠ€æœ¯é¡¹çš„æ ¸å¿ƒç»„ä»¶ï¼š

```mermaid
classDiagram
class TechCard {
+item : TechItem
+isActive : boolean
+priorityClass : string
+render() JSX.Element
}
class TechItem {
+id : number
+name : string
+status : 'active' | 'missing'
+priority : 'high' | 'medium' | 'low' | ''
+is_new : number
+description : string
+tags : string
}
TechCard --> TechItem : "æ¥æ”¶æ•°æ®"
note for TechCard "çŠ¶æ€æŒ‡ç¤ºï¼š<br/>âœ“ active<br/>â—‹ missing<br/>NEW æ ‡è®°"
```

**å›¾è¡¨æ¥æº**
- [components/TechCard.tsx](file://components/TechCard.tsx#L7-L37)
- [types/index.ts](file://types/index.ts#L16-L26)

#### è®¾è®¡ç‰¹è‰²

- **çŠ¶æ€å¯è§†åŒ–**ï¼šé€šè¿‡é¢œè‰²å’Œå›¾æ ‡ç›´è§‚æ˜¾ç¤ºæŠ€æœ¯é¡¹çŠ¶æ€
- **ä¼˜å…ˆçº§æ ‡è¯†**ï¼šä½¿ç”¨ä¸åŒé¢œè‰²è¾¹æ¡†è¡¨ç¤ºä¼˜å…ˆçº§
- **æ‚¬åœäº¤äº’**ï¼šæä¾›è¯¦ç»†çš„å·¥å…·æç¤ºä¿¡æ¯
- **æ–°å¢æ ‡è®°**ï¼šçªå‡ºæ˜¾ç¤ºæœ€æ–°æ·»åŠ çš„æŠ€æœ¯é¡¹

**ç« èŠ‚æ¥æº**
- [components/TechCard.tsx](file://components/TechCard.tsx#L1-L37)

### ç­›é€‰æ ç»„ä»¶

ç­›é€‰æ æä¾›å¤šç§ç»´åº¦çš„æŠ€æœ¯é¡¹ç­›é€‰åŠŸèƒ½ï¼š

```mermaid
flowchart LR
subgraph "ç­›é€‰é€‰é¡¹"
A[å…¨éƒ¨æŠ€æœ¯]
B[å·²æœ‰æŠ€æœ¯ âœ“]
C[ç¼ºå¤±æŠ€æœ¯ â—‹]
D[å‰ç«¯ ğŸ¨]
E[åç«¯ âš™ï¸]
F[å¤šè¯­è¨€ ğŸ”¤]
G[å‘å¸ƒç­–ç•¥ ğŸš€]
H[ç›‘æ§å‘Šè­¦ ğŸ“Š]
I[å®‰å…¨åˆè§„ ğŸ”’]
end
subgraph "ç­›é€‰é€»è¾‘"
J[çŠ¶æ€ç­›é€‰]
K[æ ‡ç­¾ç­›é€‰]
L[ç»„åˆç­›é€‰]
end
A --> J
B --> J
C --> J
D --> K
E --> K
F --> K
G --> K
H --> K
I --> K
J --> L
K --> L
```

**å›¾è¡¨æ¥æº**
- [components/FilterBar.tsx](file://components/FilterBar.tsx#L7-L17)

**ç« èŠ‚æ¥æº**
- [components/FilterBar.tsx](file://components/FilterBar.tsx#L1-L52)

### ç»Ÿè®¡é¢æ¿ç»„ä»¶

ç»Ÿè®¡é¢æ¿æä¾›æŠ€æœ¯æ ˆçš„æ•´ä½“çŠ¶æ€æ¦‚è§ˆï¼š

```mermaid
graph TB
subgraph "ç»Ÿè®¡æŒ‡æ ‡"
A[å·²æœ‰æŠ€æœ¯æ ˆ<br/>âœ“ active]
B[å¾…å»ºè®¾é¡¹<br/>â—‹ missing]
C[æ€»æŠ€æœ¯æ•°<br/>ğŸ“Š total]
D[å½“å‰æˆç†Ÿåº¦<br/>ğŸ“ˆ coverage%]
end
subgraph "è§†è§‰è®¾è®¡"
E[ç»¿è‰²ä¸»é¢˜ emerald-400]
F[æ©™è‰²ä¸»é¢˜ amber-400]
G[è“è‰²ä¸»é¢˜ blue-400]
H[ç´«è‰²ä¸»é¢˜ purple-400]
end
A --> E
B --> F
C --> G
D --> H
```

**å›¾è¡¨æ¥æº**
- [components/StatsPanel.tsx](file://components/StatsPanel.tsx#L10-L54)

**ç« èŠ‚æ¥æº**
- [components/StatsPanel.tsx](file://components/StatsPanel.tsx#L1-L84)

## ä¾èµ–åˆ†æ

### æŠ€æœ¯æ ˆä¾èµ–å…³ç³»

```mermaid
graph TB
subgraph "å‰ç«¯ä¾èµ–"
A[Next.js 16]
B[React 19]
C[Tailwind CSS]
D[TypeScript]
end
subgraph "æ•°æ®åº“ä¾èµ–"
E[better-sqlite3]
F[SQLite]
end
subgraph "å¼€å‘å·¥å…·"
G[ESLint]
H[TailwindCSS]
I[TSX]
end
subgraph "UI ç»„ä»¶"
J[@dnd-kit]
K[lucide-react]
L[clsx]
M[tailwind-merge]
end
A --> B
A --> C
A --> D
E --> F
G --> A
H --> C
I --> D
J --> B
K --> B
L --> C
M --> C
```

**å›¾è¡¨æ¥æº**
- [package.json](file://package.json#L12-L36)

### å¤–éƒ¨ä¾èµ–ç®¡ç†

é¡¹ç›®é‡‡ç”¨ pnpm åŒ…ç®¡ç†å™¨ï¼Œç‰¹åˆ«é…ç½®äº† `onlyBuiltDependencies` æ¥ä¼˜åŒ– better-sqlite3 çš„å®‰è£…è¿‡ç¨‹ï¼š

```mermaid
flowchart TD
A[pnpm install] --> B[æ£€æŸ¥ onlyBuiltDependencies]
B --> C[better-sqlite3]
C --> D[é¢„ç¼–è¯‘äºŒè¿›åˆ¶]
D --> E[è·³è¿‡æºç ç¼–è¯‘]
E --> F[åŠ é€Ÿå®‰è£…è¿‡ç¨‹]
subgraph "å…¶ä»–ä¾èµ–"
G[æ ‡å‡† npm å®‰è£…]
end
F --> G
G --> H[å®Œæˆå®‰è£…]
```

**å›¾è¡¨æ¥æº**
- [package.json](file://package.json#L37-L41)

**ç« èŠ‚æ¥æº**
- [package.json](file://package.json#L1-L43)
- [next.config.ts](file://next.config.ts#L1-L10)

## æ€§èƒ½è€ƒè™‘

### æ•°æ®åŠ è½½ä¼˜åŒ–

é¡¹ç›®å®ç°äº†å¤šé¡¹æ€§èƒ½ä¼˜åŒ–æªæ–½ï¼š

1. **å¹¶å‘æ•°æ®è·å–**ï¼šä½¿ç”¨ `Promise.all` å¹¶è¡Œè·å–å¤šä¸ª API ç«¯ç‚¹çš„æ•°æ®
2. **ç¼“å­˜ç­–ç•¥**ï¼šåœ¨ API è°ƒç”¨ä¸­ä½¿ç”¨ `cache: "no-store"` ç¡®ä¿æ•°æ®æ–°é²œåº¦
3. **çŠ¶æ€ä¼˜åŒ–**ï¼šé€šè¿‡ `useMemo` é¿å…ä¸å¿…è¦çš„å¯¹è±¡é‡å»º
4. **æ‰¹é‡æ›´æ–°**ï¼šä¸€æ¬¡æ€§æ›´æ–°å¤šä¸ªçŠ¶æ€å˜é‡å‡å°‘é‡æ¸²æŸ“

### æ„å»ºæ—¶ä¼˜åŒ–

- **React Compiler**ï¼šå¯ç”¨ React Compiler æå‡è¿è¡Œæ—¶æ€§èƒ½
- **å¤–éƒ¨åŒ…ä¼˜åŒ–**ï¼šé…ç½® `serverExternalPackages` ä¼˜åŒ–æœåŠ¡å™¨ç«¯æ‰“åŒ…
- **TypeScript ä¸¥æ ¼æ¨¡å¼**ï¼šæä¾›æ›´å¥½çš„ç±»å‹æ£€æŸ¥å’Œæ€§èƒ½åˆ†æ

## æ•…éšœæ’é™¤æŒ‡å—

### å¸¸è§é—®é¢˜è¯Šæ–­

#### æ•°æ®åº“è¿æ¥é—®é¢˜

**ç—‡çŠ¶**ï¼šé¡µé¢æ— æ³•åŠ è½½æˆ–æ˜¾ç¤ºç©ºç™½
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `data/techmap.db` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
2. éªŒè¯æ•°æ®åº“æ–‡ä»¶çš„è¯»å†™æƒé™
3. ç¡®è®¤ SQLite æ•°æ®åº“åˆå§‹åŒ–æˆåŠŸ

#### API è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼šç½‘ç»œé”™è¯¯æˆ– 500 çŠ¶æ€ç 
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥æ•°æ®åº“è¿æ¥å­—ç¬¦ä¸²
2. éªŒè¯ API è·¯ç”±çš„æ­£ç¡®æ€§
3. æŸ¥çœ‹æœåŠ¡å™¨ç«¯é”™è¯¯æ—¥å¿—

#### æ ·å¼é—®é¢˜

**ç—‡çŠ¶**ï¼šé¡µé¢æ ·å¼å¼‚å¸¸æˆ–ç»„ä»¶æ˜¾ç¤ºä¸æ­£ç¡®
**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ Tailwind CSS é…ç½®æ­£ç¡®
2. æ£€æŸ¥ CSS å˜é‡å®šä¹‰
3. éªŒè¯å­—ä½“åŠ è½½æƒ…å†µ

**ç« èŠ‚æ¥æº**
- [lib/db.ts](file://lib/db.ts#L1-L312)
- [app/api/layers/route.ts](file://app/api/layers/route.ts#L1-L48)

## ç»“è®º

Lantu Next é¡¹ç›®æˆåŠŸåœ°æ„å»ºäº†ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ€§èƒ½ä¼˜å¼‚çš„æŠ€æœ¯æ ˆç®¡ç†ç³»ç»Ÿã€‚é€šè¿‡åˆç†çš„æ¶æ„è®¾è®¡å’ŒæŠ€æœ¯é€‰å‹ï¼Œè¯¥é¡¹ç›®ä¸ä»…æ»¡è¶³äº†å½“å‰çš„åŠŸèƒ½éœ€æ±‚ï¼Œè¿˜ä¸ºæœªæ¥çš„æ‰©å±•å¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

### é¡¹ç›®ä¼˜åŠ¿

1. **æ¶æ„æ¸…æ™°**ï¼šé‡‡ç”¨åˆ†å±‚æ¶æ„ï¼ŒèŒè´£åˆ†ç¦»æ˜ç¡®
2. **æ€§èƒ½ä¼˜ç§€**ï¼šé€šè¿‡å¤šé¡¹ä¼˜åŒ–æªæ–½ç¡®ä¿è‰¯å¥½çš„ç”¨æˆ·ä½“éªŒ
3. **æ˜“äºç»´æŠ¤**ï¼šTypeScript ç±»å‹å®‰å…¨å’Œæ¨¡å—åŒ–è®¾è®¡
4. **æ‰©å±•æ€§å¼º**ï¼šçµæ´»çš„ç»„ä»¶è®¾è®¡æ”¯æŒåŠŸèƒ½æ‰©å±•

### æŠ€æœ¯åˆ›æ–°ç‚¹

- **å¯è§†åŒ–æŠ€æœ¯è“å›¾**ï¼šç›´è§‚å±•ç¤ºå¤æ‚çš„æŠ€æœ¯æ ˆå…³ç³»
- **å®æ—¶çŠ¶æ€ç®¡ç†**ï¼šæä¾›å‡†ç¡®çš„æŠ€æœ¯æ ˆçŠ¶æ€åé¦ˆ
- **å¤šç»´åº¦ç­›é€‰**ï¼šæ”¯æŒçµæ´»çš„æŠ€æœ¯é¡¹æŸ¥è¯¢å’Œç­›é€‰
- **å“åº”å¼è®¾è®¡**ï¼šé€‚é…å„ç§è®¾å¤‡å’Œå±å¹•å°ºå¯¸

## é™„å½•

### API æ¥å£è§„èŒƒ

| èµ„æº | æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|------|
| å±‚çº§ | GET | `/api/layers` | è·å–æ‰€æœ‰å±‚çº§ |
| å±‚çº§ | POST | `/api/layers` | åˆ›å»ºæ–°å±‚çº§ |
| åˆ†ç±» | GET | `/api/categories` | è·å–æ‰€æœ‰åˆ†ç±» |
| åˆ†ç±» | POST | `/api/categories` | åˆ›å»ºæ–°åˆ†ç±» |
| æŠ€æœ¯é¡¹ | GET | `/api/tech-items` | è·å–æ‰€æœ‰æŠ€æœ¯é¡¹ |
| æŠ€æœ¯é¡¹ | POST | `/api/tech-items` | åˆ›å»ºæ–°æŠ€æœ¯é¡¹ |
| æŠ€æœ¯é¡¹ | PUT | `/api/tech-items` | æ›´æ–°æŠ€æœ¯é¡¹ |
| æŠ€æœ¯é¡¹ | DELETE | `/api/tech-items?id={id}` | åˆ é™¤æŠ€æœ¯é¡¹ |
| ç»Ÿè®¡ | GET | `/api/stats` | è·å–ç»Ÿè®¡æ•°æ® |

### æ•°æ®åº“è¡¨ç»“æ„

```mermaid
erDiagram
layers {
INTEGER id PK
TEXT name
TEXT icon
INTEGER display_order
}
categories {
INTEGER id PK
TEXT name
TEXT icon
INTEGER layer_id FK
INTEGER display_order
}
tech_items {
INTEGER id PK
TEXT name
INTEGER category_id FK
TEXT status
TEXT priority
INTEGER is_new
TEXT description
TEXT tags
INTEGER display_order
}
users {
INTEGER id PK
TEXT username UK
TEXT password
}
```

**å›¾è¡¨æ¥æº**
- [lib/db.ts](file://lib/db.ts#L14-L49)